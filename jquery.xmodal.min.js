(function(c){c.fn.xModal=function(n){var l=c('<div class="modal-wrapper"><div><div></div></div></div>'),d=l.find(">*"),k=l.find(">*>*");var h=c.extend({width:"75%",headline:"",description:"",href:"",effect:"puff",html:""},n);function i(){var o=function(p){if(p){a("event:"+p)}else{a("this didn't come from an event!")}c(l).removeClass(h.effect+"In").addClass(h.effect+"Out");setTimeout(function(){c(l).removeClass("active").removeClass(h.effect+"Out");k.empty();c(l).remove()},1000);c(document).off("keyup.xModalEscape");c(document).off("click.xModalCloseBody")};c(document).on("keyup.xModalEscape",function(p){a("e.which:"+p.which);if(p.which=="27"){a("you hit escape");o(p)}});c(document).off("click.xModalClose",".closeModal").on("click.xModalClose",".closeModal",function(){a("you clicked the close icon");o()});c(document).on("click.xModalCloseBody",".modal-wrapper",function(p){a("clicked on this: "+p.target);if(c(p.target).is(".modal-wrapper")){o()}})}function m(o,p){c.ajax({url:o,success:function(q){a("success");p(q)},error:function(q){a("error");p(c("<div>ERROR</div>"))}})}if(!this.selector){a("this is not a selector.");var g=c("<div/>");if(h.href){a("you gotta path!"+h.href);m(h.href,function(o){c(o).prependTo(k)})}if(h.headline){c("<h1>"+h.headline+"</h1>").appendTo(g)}if(h.description){c("<p>"+h.description+"</p>").appendTo(g)}if(h.html){c(h.html).appendTo(g);f()}if(h.img){function e(q){var o=c.Deferred(),p=new Image();p.onload=function(){o.resolve()};p.src=q;return o.promise()}var j=[];j.push(e(h.img));c.when.apply(null,j).done(function(){a("done");c("<img src="+h.img+">").appendTo(g);f()})}function f(){g.prependTo(k);l.appendTo("body");var o=k.height();d.find(".closeModal").remove();c('<a class="closeModal icon-close"></a>').prependTo(d);d.width(h.width);d.height(o);d.css({"margin-top":-(o/2)+"px"});c(l).addClass("active").addClass(h.effect+"In");i()}return}this.off("click.xModal").on("click.xModal",function(r){a("inside xmodal close");r.preventDefault();var q=c(this),p=q.attr("href");if(!p.indexOf("#")){a("contains a #");var s=c(p);s.clone().appendTo(k);if(p.length==1){if(h.headline){c("<h1>"+h.headline+"</h1>").appendTo(k)}if(h.description){c("<p>"+h.description+"</p>").appendTo(k)}}}else{m(p,function(t){c(t).prependTo(k)})}l.appendTo("body");var o=k.height();d.find(".closeModal").remove();c('<a class="closeModal icon-close"></a>').prependTo(d);d.width(h.width);d.height(o);d.css({"margin-top":-(o/2)+"px"});c(l).addClass("active").addClass(h.effect+"In");i()});return this};jQuery.extend({xModal:function(d){c(window).xModal(d)}});var b=true;function a(d){if(b===true){console.log(d)}}}(jQuery));