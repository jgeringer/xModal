!function(o){function e(o){1===n&&console.log(o)}o.fn.xModal=function(n){function i(){var n=function(n){e(n?"event:"+n:"this didn't come from an event!"),u.onCloseStart&&u.onCloseStart(),o(s).removeClass(u.effect+"In").addClass(u.effect+"Out"),setTimeout(function(){o(s).removeClass("active").removeClass(u.effect+"Out"),p.empty(),o(s).remove(),u.onCloseDone&&u.onCloseDone()},1e3),o(document).off("keyup.xModalEscape"),o(document).off("close.xModalCloseBody")};o(document).on("keyup.xModalEscape",function(o){e("e.which:"+o.which),"27"==o.which&&(e("you hit escape"),n(o))}),o(document).off("click.xModalClose",".closeModal").on("click.xModalClose",".closeModal",function(){e("you clicked the close icon"),n()}),o(document).off("click.xModalCloseBody",".modal-wrapper").on("click.xModalCloseBody",".modal-wrapper",function(i){e("clicked on this: "+i.target),o(i.target).is(".modal-wrapper")&&n()});var i=o(".modal-wrapper")[0],t=window.getComputedStyle(i),a=t.getPropertyValue("-webkit-animation-duration"),d=a.slice(0,-1),c=1e3*d;setTimeout(function(){l()},c)}function t(n,i){o.ajax({url:n,success:function(o){e("success"),i(o)},error:function(n){e("error"),i(o("<div>ERROR</div>"))},complete:function(){d()}})}function a(e){var n=o.Deferred(),i=new Image;return i.onload=function(){n.resolve()},i.src=e,n.promise()}function d(){e("Doing the styling::::"+f),f.prependTo(p),s.appendTo("body");var n=p.height();r.find(".closeModal").remove(),o('<a class="closeModal icon-close"></a>').prependTo(r),r.width(u.width),r.height(n),r.css({"margin-top":-(n/2)+"px"}),o(s).addClass("active").addClass(u.effect+"In"),i()}function c(){e("loadingStart..."),u.onLoadingStart&&u.onLoadingStart()}function l(){e("loadingComplete"),u.onLoadingDone&&u.onLoadingDone()}var s=o('<div class="modal-wrapper"><div><div></div></div></div>'),r=s.find(">*"),p=s.find(">*>*"),f=o("<div/>"),u=o.extend({width:"75%",headline:"",description:"",href:"",effect:"puff",html:"",onLoadingStart:"",onLoadingDone:"",onCloseStart:"",onCloseDone:""},n);if(this.selector)return this.off("click.xModal").on("click.xModal",function(n){n.preventDefault();var a=o(this),d=a.attr("href");if(c(),d.indexOf("#"))t(d,function(e){o(e).prependTo(p)});else{e("contains a #");var l=o(d);l.clone().appendTo(p),1==d.length&&(u.headline&&o("<h1>"+u.headline+"</h1>").appendTo(p),u.description&&o("<p>"+u.description+"</p>").appendTo(p))}s.appendTo("body");var f=p.height();r.find(".closeModal").remove(),o('<a class="closeModal icon-close"></a>').prependTo(r),r.width(u.width),r.height(f),r.css({"margin-top":-(f/2)+"px"}),o(s).addClass("active").addClass(u.effect+"In"),i()}),this;if(c(),e("this is not a selector."),u.href&&(e("you gotta path foooooo!!!!!!!!!! "+u.href),t(u.href,function(e){o(e).prependTo(p)})),(u.headline||u.description)&&(u.headline&&o("<h1>"+u.headline+"</h1>").appendTo(f),u.description&&o("<p>"+u.description+"</p>").appendTo(f),d()),u.html&&(o(u.html).appendTo(f),d()),u.img){var h=[];h.push(a(u.img)),o.when.apply(null,h).done(function(){e("done"),o("<img src="+u.img+">").appendTo(f),d()})}},jQuery.extend({xModal:function(e){o(window).xModal(e)}});var n=1}(jQuery);